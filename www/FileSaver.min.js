/* FileSaver.js - Minimal version for feedback app */
(function(global) {
    'use strict';
    
    var saveAs = global.saveAs || (function() {
        // Feature detection
        var canUseDownload = 'download' in document.createElement('a');
        
        return function saveAs(blob, name) {
            if (!blob) {
                throw new Error('Blob required');
            }
            
            if (!name) {
                name = 'download';
            }
            
            try {
                // Create object URL
                var url = URL.createObjectURL(blob);
                
                // Create download link
                var a = document.createElement('a');
                a.style.display = 'none';
                a.href = url;
                a.download = name;
                
                // Trigger download
                document.body.appendChild(a);
                a.click();
                
                // Cleanup
                setTimeout(function() {
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                }, 100);
                
                return true;
            } catch (e) {
                console.error('SaveAs error:', e);
                
                // Fallback: try opening in new window
                try {
                    var url = URL.createObjectURL(blob);
                    window.open(url, '_blank');
                    setTimeout(function() {
                        URL.revokeObjectURL(url);
                    }, 1000);
                    return true;
                } catch (e2) {
                    console.error('Fallback error:', e2);
                    return false;
                }
            }
        };
    })();
    
    // Export for different environments
    if (typeof module !== 'undefined' && module.exports) {
        module.exports = saveAs;
    } else {
        global.saveAs = saveAs;
    }
    
})(typeof self !== 'undefined' ? self : this);
